# CAN总线

1.优先级

​     数据帧和遥控帧有标准格式和扩展格式两种格式。标准格式有 11 个位的标识符(Identifier: 以下称 ID),扩展格式有 29 个位的 ID，ID值越小优先级越高。stm32中，mailbox寄存器(CAN_RIxR)中的IDE位用于判定收到的数据是标准格式还是扩展格式

2、主要用作CAN总线的仲裁使用，所以一般来说网络上的每个节点（向总线上发送）的ID应该有所不同。ID值越低，报文优先级越高，在两组不同ID报文同时上线时候，仲裁机制使得ID值低的占用总线，ID值高的退出。

3、ID域可以是11位和29位，其值和含义可以由用户自定义，可以用作高层协议的管理，比如CANopen等协议中把ID的部分做为“源地址”，部分作为“目的地址”，这样CAN报文从哪来到哪去都清晰了。

4、ID的另一个作用是配合接收方滤波使用，就是说一般接收的滤波器可以设定接收ID的范围等，用于过滤掉不需要接收的信息，减轻CPU的处理负担。

如果总线上有两个节点用同样的id号发数据包，则接收方会收到两个数据的与运算后的结果